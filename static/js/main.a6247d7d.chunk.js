(this.webpackJsonpwriting=this.webpackJsonpwriting||[]).push([[0],{33:function(e,t,n){e.exports=n(50)},38:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},45:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(30),o=n.n(s),i=(n(38),n(32)),c=n(16),u=n(3),l=n.n(u),p=n(13),f=n(8),h=n(9),d=n(11),m=n(10),v=n(1),b=n(19),y=(n(40),function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"Wrapper"},this.props.children)}}]),n}(a.a.Component)),w=(n(41),n(12));n(27),n(29);function g(e,t){var n=e[0],r=e[1],a=e[2],s=e[3];n=j(n,r,a,s,t[0],7,-680876936),s=j(s,n,r,a,t[1],12,-389564586),a=j(a,s,n,r,t[2],17,606105819),r=j(r,a,s,n,t[3],22,-1044525330),n=j(n,r,a,s,t[4],7,-176418897),s=j(s,n,r,a,t[5],12,1200080426),a=j(a,s,n,r,t[6],17,-1473231341),r=j(r,a,s,n,t[7],22,-45705983),n=j(n,r,a,s,t[8],7,1770035416),s=j(s,n,r,a,t[9],12,-1958414417),a=j(a,s,n,r,t[10],17,-42063),r=j(r,a,s,n,t[11],22,-1990404162),n=j(n,r,a,s,t[12],7,1804603682),s=j(s,n,r,a,t[13],12,-40341101),a=j(a,s,n,r,t[14],17,-1502002290),n=O(n,r=j(r,a,s,n,t[15],22,1236535329),a,s,t[1],5,-165796510),s=O(s,n,r,a,t[6],9,-1069501632),a=O(a,s,n,r,t[11],14,643717713),r=O(r,a,s,n,t[0],20,-373897302),n=O(n,r,a,s,t[5],5,-701558691),s=O(s,n,r,a,t[10],9,38016083),a=O(a,s,n,r,t[15],14,-660478335),r=O(r,a,s,n,t[4],20,-405537848),n=O(n,r,a,s,t[9],5,568446438),s=O(s,n,r,a,t[14],9,-1019803690),a=O(a,s,n,r,t[3],14,-187363961),r=O(r,a,s,n,t[8],20,1163531501),n=O(n,r,a,s,t[13],5,-1444681467),s=O(s,n,r,a,t[2],9,-51403784),a=O(a,s,n,r,t[7],14,1735328473),n=x(n,r=O(r,a,s,n,t[12],20,-1926607734),a,s,t[5],4,-378558),s=x(s,n,r,a,t[8],11,-2022574463),a=x(a,s,n,r,t[11],16,1839030562),r=x(r,a,s,n,t[14],23,-35309556),n=x(n,r,a,s,t[1],4,-1530992060),s=x(s,n,r,a,t[4],11,1272893353),a=x(a,s,n,r,t[7],16,-155497632),r=x(r,a,s,n,t[10],23,-1094730640),n=x(n,r,a,s,t[13],4,681279174),s=x(s,n,r,a,t[0],11,-358537222),a=x(a,s,n,r,t[3],16,-722521979),r=x(r,a,s,n,t[6],23,76029189),n=x(n,r,a,s,t[9],4,-640364487),s=x(s,n,r,a,t[12],11,-421815835),a=x(a,s,n,r,t[15],16,530742520),n=E(n,r=x(r,a,s,n,t[2],23,-995338651),a,s,t[0],6,-198630844),s=E(s,n,r,a,t[7],10,1126891415),a=E(a,s,n,r,t[14],15,-1416354905),r=E(r,a,s,n,t[5],21,-57434055),n=E(n,r,a,s,t[12],6,1700485571),s=E(s,n,r,a,t[3],10,-1894986606),a=E(a,s,n,r,t[10],15,-1051523),r=E(r,a,s,n,t[1],21,-2054922799),n=E(n,r,a,s,t[8],6,1873313359),s=E(s,n,r,a,t[15],10,-30611744),a=E(a,s,n,r,t[6],15,-1560198380),r=E(r,a,s,n,t[13],21,1309151649),n=E(n,r,a,s,t[4],6,-145523070),s=E(s,n,r,a,t[11],10,-1120210379),a=E(a,s,n,r,t[2],15,718787259),r=E(r,a,s,n,t[9],21,-343485551),e[0]=B(n,e[0]),e[1]=B(r,e[1]),e[2]=B(a,e[2]),e[3]=B(s,e[3])}function k(e,t,n,r,a,s){return t=B(B(t,e),B(r,s)),B(t<<a|t>>>32-a,n)}function j(e,t,n,r,a,s,o){return k(t&n|~t&r,e,t,a,s,o)}function O(e,t,n,r,a,s,o){return k(t&r|n&~r,e,t,a,s,o)}function x(e,t,n,r,a,s,o){return k(t^n^r,e,t,a,s,o)}function E(e,t,n,r,a,s,o){return k(n^(t|~r),e,t,a,s,o)}function C(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var S="0123456789abcdef".split("");function A(e){for(var t="",n=0;n<4;n++)t+=S[e>>8*n+4&15]+S[e>>8*n&15];return t}function P(e){return function(e){for(var t=0;t<e.length;t++)e[t]=A(e[t]);return e.join("")}(function(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)g(r,C(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(g(r,a),t=0;t<16;t++)a[t]=0;return a[14]=8*n,g(r,a),r}(e))}function B(e,t){return e+t&4294967295}if("5d41402abc4b2a76b9719d911017c592"!==P("hello"));var F=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).state={title:r.props.title,subtitle:"",paragraphs:[]},r}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.passwordRequired();case 2:if(!e.sent){e.next=9;break}return e.next=5,this.authenticate();case 5:if(e.sent){e.next=9;break}return alert("Still wrong, bye."),e.abrupt("return");case 9:this.downloadFile(this.props.title);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"authenticate",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<2)){e.next=10;break}return e.next=4,this.tryPassword(t);case 4:if(!e.sent){e.next=7;break}return e.abrupt("return",!0);case 7:t++,e.next=1;break;case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"tryPassword",value:function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.prompt(0===t?"Password:":"Wrong, try again?"),r=P(n.toLowerCase()+"salt"),e.next=4,w.firestore().collection("passwords").where("password","==",r).get();case 4:if(!(a=e.sent).empty){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",a.docs[0].data().post===this.props.title);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"passwordRequired",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.firestore().collection("posts").where("name","==",this.props.title).get();case 2:if(!(t=e.sent).empty){e.next=5;break}return e.abrupt("return",!1);case 5:return e.abrupt("return",t.docs[0].data().passwordRequired||!1);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadFile",value:function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.storage().ref().child("posts/".concat(t,".txt")).getDownloadURL();case 2:n=e.sent,(r=new XMLHttpRequest).responseType="text",a=this,r.onload=function(e){a.processFile(r.response)},r.open("GET",n),r.send();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processFile",value:function(e){var t=e.split("\n");this.setState(Object(c.a)(Object(c.a)({},this.state),{},{title:t[0],subtitle:t[1],paragraphs:t.slice(2)}))}},{key:"renderBody",value:function(e){return e.map((function(e){return e.trim()})).filter((function(e){return 0!==e.length})).map((function(e,t){return a.a.createElement("div",{key:t,className:"Paragraph"},e)}))}},{key:"render",value:function(){var e=this.state,t=e.title,n=e.subtitle,r=e.paragraphs;return a.a.createElement(y,null,this.fonts(),a.a.createElement("a",{className:"Title",href:"/writing"},t),a.a.createElement("div",{className:"Subtitle"},n),this.renderBody(r))}},{key:"fonts",value:function(){return a.a.createElement("div",null,a.a.createElement("link",{href:"https://fonts.googleapis.com/css2?family=Crimson+Text&display=swap",rel:"stylesheet"}),a.a.createElement("link",{href:"https://fonts.googleapis.com/css2?family=Amiri&display=swap",rel:"stylesheet"}),a.a.createElement("link",{href:"https://fonts.googleapis.com/css2?family=EB+Garamond&display=swap",rel:"stylesheet"}))}}]),n}(a.a.Component),T=(n(45),function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(f.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).containerStyle={paddingBottom:"45px"},e.style={fontSize:32,fontWeight:500,letterSpacing:"1px",color:"lavender",fontFamily:"Helvetica Neue",textDecoration:"None"},e}return Object(h.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{style:this.containerStyle},a.a.createElement(b.b,{style:this.style,to:this.props.to,target:this.props.openInNewTab?"_blank":"",rel:"noopener noreferrer"},this.props.text))}}]),n}(a.a.Component)),D=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"renderPosts",value:function(){var e=this.props.posts;return e.sort().reverse(),e.map((function(e){return a.a.createElement(T,{key:e,text:e,to:"/".concat(e.replace(/\./g,""))})}))}},{key:"render",value:function(){return a.a.createElement(y,null,this.renderPosts())}}]),n}(a.a.Component),I=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).state={posts:[]},r}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.fetchPosts()}},{key:"getPassword",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.firestore(),e.next=3,t.collection("passwords").where("password","==","airbnb").get();case 3:n=e.sent,console.log(n.empty),n.docs.map((function(e){return console.log(e.id," => ",e.data())}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPosts",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.storage().ref().child("posts").listAll();case 2:t=e.sent,n=t.items.map((function(e){return r.removeFileExtension(e.name)})),this.setState(Object(c.a)(Object(c.a)({},this.state),{},{posts:n}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeFileExtension",value:function(e){return e.split(".").slice(0,-1).join(".")}},{key:"routePosts",value:function(){return this.state.posts.map((function(e){return a.a.createElement(v.a,{key:e,path:"/".concat(e.replace(/\./g,""))},a.a.createElement(F,{title:e}))}))}},{key:"render",value:function(){var e=this.state.posts;return a.a.createElement(b.a,null,a.a.createElement("div",null,a.a.createElement(v.c,null,[].concat(Object(i.a)(this.routePosts()),[a.a.createElement(v.a,{path:"/writing/test",key:"/test"},a.a.createElement(F,{title:"Title",subtitle:"Subtitle",paragraphs:[]})),a.a.createElement(v.a,{path:"/",key:"/"},a.a.createElement(D,{posts:e}))]))))}}]),n}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));w.initializeApp({apiKey:"AIzaSyA_dbsTV16M23o1kYtBaaFidEG89oODObM",authDomain:"writing-d0045.firebaseapp.com",databaseURL:"https://writing-d0045.firebaseio.com",projectId:"writing-d0045",storageBucket:"writing-d0045.appspot.com",messagingSenderId:"486753255279",appId:"1:486753255279:web:64fb3078b53972a3ca729a",measurementId:"G-GDETK26QK5"}),o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.a6247d7d.chunk.js.map